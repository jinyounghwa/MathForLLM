# Day 17: 역행렬과 단위행렬 (1시간)

## 📚 학습 목표
- 단위행렬의 개념 이해하기
- 역행렬의 정의와 계산 방법 익히기
- 역행렬의 존재 조건 파악하기
- 연립방정식 풀이에 활용하기

---

## 🎯 강의 주제
**"곱해서 1(단위행렬)이 되는 행렬"**

---

## 📖 핵심 개념

### 1. 단위행렬 (Identity Matrix)

**정의**: 대각선이 1, 나머지가 0인 정사각행렬
```
I₂ = [1  0]
     [0  1]

I₃ = [1  0  0]
     [0  1  0]
     [0  0  1]
```

**성질**:
```
AI = IA = A  (어떤 행렬에 곱해도 그대로)
Iv = v       (벡터에 곱해도 그대로)
```

**숫자 1과의 유사성**:
```
1 × a = a × 1 = a
I × A = A × I = A
```

---

### 2. 역행렬 (Inverse Matrix)

**정의**: A와 곱해서 단위행렬이 되는 행렬
```
A A⁻¹ = A⁻¹ A = I
```

**조건**:
- 정사각행렬이어야 함
- 행렬식(determinant)이 0이 아니어야 함

**2×2 역행렬 공식**:
```
A = [a  b]
    [c  d]

det(A) = ad - bc

A⁻¹ = 1/(ad-bc) [ d  -b]
                 [-c   a]
```

**예시**:
```
A = [2  1]
    [5  3]

det(A) = 2×3 - 1×5 = 1

A⁻¹ = 1/1 [ 3  -1]  = [ 3  -1]
          [-5   2]    [-5   2]

확인:
AA⁻¹ = [2  1] [ 3  -1]  = [1  0]  ✓
       [5  3] [-5   2]    [0  1]
```

---

### 3. 역행렬의 성질

**1. 역행렬의 역행렬**:
```
(A⁻¹)⁻¹ = A
```

**2. 전치의 역행렬**:
```
(A^T)⁻¹ = (A⁻¹)^T
```

**3. 곱의 역행렬 (중요!)**:
```
(AB)⁻¹ = B⁻¹ A⁻¹

순서가 바뀝니다!
```

**4. 스칼라배의 역행렬**:
```
(kA)⁻¹ = (1/k) A⁻¹
```

---

### 4. 연립방정식 풀이

**행렬 형태**:
```
Ax = b
```

**해**:
```
x = A⁻¹ b  (A가 역행렬을 가질 때)
```

**예시**:
```
2x + y = 5
5x + 3y = 13

행렬 형태:
[2  1] [x]   [5]
[5  3] [y] = [13]

A⁻¹ = [ 3  -1]
      [-5   2]

[x]   [ 3  -1] [5]    [2]
[y] = [-5   2] [13] = [1]

∴ x = 2, y = 1
```

---

## 💻 Python 실습

### 실습 1: 단위행렬
```python
import numpy as np

# 단위행렬 생성
I3 = np.eye(3)
I4 = np.identity(4)

print("=== 단위행렬 ===")
print(f"I₃ =\n{I3}\n")
print(f"I₄ =\n{I4}\n")

# 성질 확인
A = np.array([[1, 2, 3],
              [4, 5, 6],
              [7, 8, 9]])

print(f"A =\n{A}\n")
print(f"AI =\n{A @ I3}\n")
print(f"IA =\n{I3 @ A}\n")
print(f"A = AI = IA: {np.allclose(A, A @ I3) and np.allclose(A, I3 @ A)}")
```

### 실습 2: 역행렬 계산
```python
import numpy as np

# 2×2 역행렬
A = np.array([[2.0, 1.0],
              [5.0, 3.0]])

print("=== 역행렬 계산 ===")
print(f"A =\n{A}\n")

# NumPy로 역행렬
A_inv = np.linalg.inv(A)
print(f"A⁻¹ =\n{A_inv}\n")

# 수동 계산 (2×2)
det = A[0,0]*A[1,1] - A[0,1]*A[1,0]
A_inv_manual = (1/det) * np.array([[A[1,1], -A[0,1]],
                                    [-A[1,0], A[0,0]]])
print(f"A⁻¹ (수동) =\n{A_inv_manual}\n")

# 확인: AA⁻¹ = I
I = A @ A_inv
print(f"AA⁻¹ =\n{I}\n")
print(f"단위행렬인가? {np.allclose(I, np.eye(2))}")
```

### 실습 3: 연립방정식 풀이
```python
import numpy as np

# 연립방정식: Ax = b
# 2x + y = 5
# 5x + 3y = 13

A = np.array([[2.0, 1.0],
              [5.0, 3.0]])
b = np.array([5.0, 13.0])

print("=== 연립방정식 풀이 ===")
print("2x + y = 5")
print("5x + 3y = 13\n")

# 방법 1: 역행렬 사용
A_inv = np.linalg.inv(A)
x1 = A_inv @ b
print(f"방법 1 (역행렬): x = {x1}")

# 방법 2: np.linalg.solve (더 효율적)
x2 = np.linalg.solve(A, b)
print(f"방법 2 (solve): x = {x2}\n")

# 확인
result = A @ x1
print(f"Ax = {result}")
print(f"b = {b}")
print(f"정답 확인: {np.allclose(result, b)}")
```

---

## ✍️ 손 계산 연습

### 연습 1: 2×2 역행렬
```
A = [3  1]
    [2  1]

det(A) = 3×1 - 1×2 = 1

A⁻¹ = 1/1 [ 1  -1]  = [ 1  -1]
          [-2   3]    [-2   3]

확인:
[3  1] [ 1  -1]  = [1  0]  ✓
[2  1] [-2   3]    [0  1]
```

### 연습 2: 곱의 역행렬
```
A⁻¹ = [ 1  -1]    B⁻¹ = [1  0]
      [-2   3]          [0  2]

(AB)⁻¹ = B⁻¹ A⁻¹ = [1  0] [ 1  -1]  = [ 1  -1]
                    [0  2] [-2   3]    [-4   6]
```

### 연습 3: 연립방정식
```
x + 2y = 5
3x + 4y = 11

A = [1  2]    b = [5]
    [3  4]        [11]

det(A) = 4 - 6 = -2

A⁻¹ = -1/2 [ 4  -2]  = [-2   1]
           [-3   1]    [1.5  -0.5]

x = A⁻¹b = [-2   1  ] [5]   = [1]
           [1.5  -0.5] [11]    [2]

∴ x = 1, y = 2
```

---

## 🔗 LLM 연결점

### 1. 선형 층의 역변환
```
y = Wx + b

만약 W가 정사각이고 역행렬이 존재한다면:
x = W⁻¹(y - b)
```

### 2. 정규 방정식 (Normal Equation)
```
최소제곱법 (Least Squares):
θ = (X^T X)⁻¹ X^T y

선형 회귀의 해석해
```

### 3. 공분산 행렬의 역행렬
```
다변량 정규분포:
p(x) ∝ exp(-½ (x-μ)^T Σ⁻¹ (x-μ))

Σ⁻¹: 정밀도 행렬 (precision matrix)
```

---

## ✅ 체크포인트

- [ ] **단위행렬의 성질을 이해했나요?**

- [ ] **2×2 역행렬을 계산할 수 있나요?**

- [ ] **(AB)⁻¹ = B⁻¹A⁻¹을 이해했나요?**

- [ ] **연립방정식을 역행렬로 풀 수 있나요?**

---

## 🎓 핵심 요약

1. **단위행렬**: AI = IA = A
2. **역행렬**: AA⁻¹ = I
3. **2×2 공식**: A⁻¹ = 1/(ad-bc) [d -b; -c a]
4. **연립방정식**: x = A⁻¹b

### 다음 학습
- **Day 18**: 고유값과 고유벡터

---

**수고하셨습니다!** 🎉

**역행렬은 선형대수의 핵심 도구입니다!**
